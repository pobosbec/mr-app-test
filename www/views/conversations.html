<div class="listview lv-bordered lv-lg" style="padding-bottom: 100px;" data-ng-controller="conversationsCtrl as conversationsCtrl">
    <div class="lv-body">
        <div class="lv-item media" ng-repeat="conversation in conversations | orderBy: conversationsSorting" ng-class="{'lastConversation':$last, 'hoverOverride':isPhoneGap}">
            <a ui-sref="conversation({conversationId: conversation.ConversationId})">
                <div class="media-body waves-effect" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                    <img class="lv-img-sm avatar" style="margin-right: -18px;" ng-class="{'lastAvatar':$last}" ng-repeat="participant in conversation.Participants | orderBy: selfFirst" ng-src="{{ getAvatar(participant) || 'img/profile-pics/5.jpg' }}" alt="">
                    <ul class="convParticipants">
                        <li>
                            <div>
                                <small ng-repeat="participant in conversation.Participants | orderBy: selfFirst" class="username">{{$first ? "You" : getUsername(participant) || "unknown" }}{{$last ? '' : ', '}}</small>
                            </div>
                        </li>
                        <li ng-repeat="message in conversation.Messages | limitTo: 1"><small class="latestMessage" ng-class="{'unreadMessage':! message.isRead}">{{message.authorDisplayName}}: {{message.content}}</small>&nbsp;</li>
                    </ul>
                </div>
            </a>
        </div>
        <loading></loading>
        <div ng-click="loadUnprocessedConversations()" style="width: 100%; text-align: center; font-size: 1.3em !important;" ng-show="moreConversationsAreAvailable" class="btn btn-default waves-effect">
            <i class="zmdi zmdi-refresh-alt"></i> Load older conversations...
        </div>
        <div style="height: 25px;"></div>
    </div>
</div>