<div class="listview lv-bordered lv-lg" style="padding-bottom: 30px;" data-ng-controller="conversationsCtrl as conversationsCtrl">
    <div class="lv-body">
        <div class="lv-item media" ng-repeat="conversation in conversations | orderBy: conversationsSorting" ng-class="{'lastConversation':$last, 'hoverOverride':isPhoneGap}">
            <a ui-sref="conversation({conversationId: conversation.ConversationId})">
                <div class="media-body" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                    <img class="lv-img-sm avatar" style="margin-right: -18px;" ng-class="{'lastAvatar':$last}" ng-repeat="participant in conversation.Participants | orderBy: selfFirst" ng-src="{{ getAvatar(participant) || 'img/profile-pics/5.jpg' }}" alt="">
                    <ul class="convParticipants">
                        <li>
                            <div>
                                <small ng-repeat="participant in conversation.Participants | orderBy: selfFirst" class="username">{{$first ? "You" : getUsername(participant) || "unknown" }}{{$last ? '' : ', '}}</small>
                            </div>
                        </li>
                        <li ng-repeat="message in conversation.Messages | limitTo: 1"><small class="latestMessage" ng-class="{'unreadMessage':! message.isRead}">{{message.authorDisplayName}}: {{message.content}}</small></li>
                    </ul>
                </div>
            </a>
        </div>
        <!-- <div ng-show="loading" style="position: relative; left: 0px; text-align:center; padding-top: 50px; padding-bottom: 50px;">Loading conversations...</div>-->
        <loading></loading>
    </div>
</div>